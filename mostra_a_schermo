@Library('imparo-utili@master') _

import utilities

def issueData = [:]
def a = ""
def b = ""
pipeline{
  agent any
  parameters{
        string(
          name: 'nome',
          defaultValue: '',
          trim: true
       )
        string(
          name: 'cognome',
          defaultValue: '',
          trim: true
      )
  }

  stages{
    stage("Inizialization"){
      steps{
        script{
          issueData = [
            nome : params.nome,
            cognome : params.cognome
          ]
        }
      }
    }
    stage("Data Preparation"){
      steps{
        script{
          a = issueData.nome.toLowerCase()
          b = issueData.cognome.toLowerCase()
        }
      }
    }
    stage("Execution"){
        steps{
          script{
            String upn = ""+a+"."+b+"@miao.it"
            file("pippo")
            writeFile("pippo", upn)
            
        }
      }
    }
  }
}